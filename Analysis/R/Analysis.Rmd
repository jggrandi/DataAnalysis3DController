---
title: "Collaborative 3DUI Data Analysis"
author: "Jer√¥nimo G. Grandi"
date: "August 22, 2016"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(psych)
```

``` {r dir,echo=FALSE}
setwd("/home/jeronimo/Documents/DataAnalysis3DController/Analysis/R")
```


# Data analyisis

This is a on going analysis of the data collected in the user experiment performed.... 

# Comparisons between groups

##Hypotesis

* Groups with more than one member perform the tasks with less errors.
* Groups with two and three members perform the tasks with less errors than with one and four.
* Groups with more than one member perform the tasks faster.
* Groups with two and three members perform the tasks faster than with one and four.
* Task one and two are easier than three and four.


## Data Summary

``` {r load}
errorXGroups <- read.csv("ErrorXGroups.csv",header = FALSE)
errorXGroups
timeXGroups <- read.csv("TimeXGroups.csv", header = FALSE)
timeXGroups
```
   
Below the data is summarized:   

```{r summary}
describe(errorXGroups)
describe(timeXGroups)
```
   
And ploted:

```{r plot1}
boxplot(timeXGroups,xlab="Team members",ylab="Time",main="Time X Groups")
boxplot(errorXGroups,xlab="Team members",ylab="Error",main="Error X Groups")
```

### Correlation Analysis

The Pearson product-moment correlation coefficient is a measure of the linear correlation between two variables X and Y, giving a value between +1 and -1 inclusive, where 1 is total positive correlation, 0 is no correlation, and -1 is total negative correlation. It is widely used in the sciences as a measure of the degree of linear dependence between two variables. 

```{r fig.width=100,echo=FALSE}
library(png)
library(grid)
img <- readPNG("../../Results/correlation_TimeXGrupos.png")
 grid.raster(img)
```

```{r fig.width=100,echo=FALSE}
library(png)
library(grid)
img <- readPNG("../../Results/correlation_ErroXGrupos.png")
 grid.raster(img)
```

### Kruskal-Wallis

A collection of data samples are independent if they come from unrelated populations and the samples do not affect each other. Using the Kruskal-Wallis Test, we can decide whether the population distributions are identical without assuming them to follow the normal distribution.


```{r fig.width=100,echo=FALSE}
library(png)
library(grid)
img <- readPNG("../../Results/ErroXQntPessoas.png")
 grid.raster(img)
```

```{r fig.width=100,echo=FALSE}
library(png)
library(grid)
img <- readPNG("../../Results/ErroPerCheckpointXGrupos.png")
 grid.raster(img)
```

```{r fig.width=100,echo=FALSE}
library(png)
library(grid)
img <- readPNG("../../Results/kruskal_posHoc_Student.png")
 grid.raster(img)
```

# Comparisons between tasks

## Hypotesis

* Task 1 and 2 are easier than 3 and 4;
* Task 4 is performed better than task 3


## Summary
First we set the environment, load and show the raw data.  
 
``` {r raw}
setwd("/home/jeronimo/Documents/DataAnalysis3DController/Analysis/R")
dAvgPerTask <- read.csv("SummaryToR.csv")
dAvgPerTask
```
The data is arranged by Task vs. Team members. Collumns are organized as follows:   

* Members: Number of users in the team;   
* T1, T2, T3, T4: Time to complete task 1 to 4;    
* E1, E2, E3, E4: Errors in task 1 to 4. 

We split the data for better manipulation:

```{r}
dAvgTime <- subset(dAvgPerTask, select = c(2,3,4,5))
dAvgError <- subset(dAvgPerTask, select = c(6,7,8,9))
```

Below the data is summarized:

```{r dataAverage}
describe(dAvgTime)
describe(dAvgError)

```

### Plots

Time of task completion vs. Task for all combinations of teams:
The code used to generate the charts is:

```{r boxplot}
boxplot(dAvgTime,xlab="Tasks",ylab="Time",main="Time to complete the tasks")
boxplot(dAvgError,xlab="Tasks",ylab="Error",main="Error perfored in the tasks")

```

## Analysis of time of completion per task

### Shapiro
First, we perform the Shapiro normality test. This test determine if the data is normally distributed. It is important to determine if the data is normally distributed to conduce posterior tests.

```{r shapiro 1}
shap_dT <- lapply(dAvgTime, shapiro.test)
shap_dE <- lapply(dAvgError, shapiro.test)
res_shap_dT <- sapply(shap_dT, `[`, c("statistic","p.value"))
res_shap_dE <- sapply(shap_dE, `[`, c("statistic","p.value"))

res_shap_dT
res_shap_dE
```

As we can see, the $p-value$ of most Shapiro tests reveled that the data are not normally distributed. Since in this test the comparisons are made with the same subjects and we are varying the tasks, the next step is to perform a Friedman analysis.

### Friedman

Friedman test is a non-parametric randomized block analysis of variance. Which is to say it is a non-parametric version of a one way ANOVA with repeated measures. That means that while a simple ANOVA test requires the assumptions of a normal distribution and equal variances (of the residuals), the Friedman test is free from those restriction. The price of this parametric freedom is the loss of power (of Friedman's test compared to the parametric ANOVa versions).

The hypotheses for the comparison across repeated measures are:   

* H0: The distributions (whatever they are) are the same across repeated measures   
* H1: The distributions across repeated measures are different   

The test statistic for the Friedman's test is a Chi-square with [(number of repeated measures)-1] degrees of freedom. A detailed explanation of the method for computing the Friedman test is available on Wikipedia.

```{r fig.width=200,echo=FALSE}
library(png)
library(grid)
img <- readPNG("../../Results/friedman_TempoXTarefa.png")
grid.raster(img)
```
```{r fig.width=200,echo=FALSE}
library(png)
library(grid)
img <- readPNG("../../Results/friedman_ErroXTarefa.png") 
grid.raster(img)
```

## Analysis of learning between tasks 3 and 4

As the data is not normally distributed and the comparison is between tasks (instead of groups) we performed a Friedman analysis.



```{r fig.width=200,echo=FALSE}
library(png)
library(grid)
img <- readPNG("../../Results/fiedman_tasks3and4_error.png") 
grid.raster(img)
```

```{r fig.width=200,echo=FALSE}
library(png)
library(grid)
img <- readPNG("../../Results/fiedman_tasks3and4_time.png") 
grid.raster(img)
```







